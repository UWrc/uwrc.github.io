{
  // Configuration for the site preview codespace
  "name": "Site Preview",
  // Uses the docker node base image
  "image": "node:latest",
  "customizations": {
    "vscode": {
      // Install useful extensions to VSCode
      "extensions": [
	      // Spell check, with Hyak already added to the dictionary
        "streetsidesoftware.code-spell-checker",
        // Markdown shortcuts and utilities
        "yzhang.markdown-all-in-one",
        // Better markdown preview
        "shd101wyy.markdown-preview-enhanced"
      ]
    }
  },
  // Set NODE_OPTIONS as required by the readme
  "containerEnv": {
    "NODE_OPTIONS": "--openssl-legacy-provider"
  },
  // Commands that run when the codespace is built
                      // Update app repos so we can install
  "onCreateCommand": ["apt update &&", 
                      // Install nano text editor
                      "(apt install nano;", 
                      // Install github cli for syncing the fork and doing a PR from cli
                      "apt install gh);", 
                      // Install all of the yarn/js dependencies
                      "yarn install"],
  // Whenever the codespace starts up sync the fork to origin
  "postStartCommand": ["gh repo sync $(git config --get remote.origin.url)"]
}
